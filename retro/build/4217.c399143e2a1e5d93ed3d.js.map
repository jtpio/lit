{"version":3,"file":"4217.c399143e2a1e5d93ed3d.js","mappings":"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","sources":["webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/mode.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/codemirror-ipython.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/codemirror-ipythongfm.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/editor.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/factory.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/mimetype.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/syntaxstatus.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/tokens.js","webpack://_JUPYTERLAB.CORE_OUTPUT/../../node_modules/@retrolab/notebook-extension/node_modules/@jupyterlab/codemirror/lib/index.js"],"sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { IEditorMimeTypeService } from '@jupyterlab/codeeditor';\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { ArrayExt } from '@lumino/algorithm';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/addon/runmode/runmode';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/css/css';\n// Bundle other common modes\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/julia/julia';\nimport 'codemirror/mode/markdown/markdown';\nimport 'codemirror/mode/meta';\nimport 'codemirror/mode/r/r';\nimport 'codemirror/mode/shell/shell';\nimport 'codemirror/mode/sql/sql';\nimport './codemirror-ipython';\nimport './codemirror-ipythongfm';\n/**\n * The namespace for CodeMirror Mode functionality.\n */\nexport var Mode;\n(function (Mode) {\n    const specLoaders = [\n        {\n            // Simplest, cheapest check by mode name.\n            loader: async (spec) => CodeMirror.modes.hasOwnProperty(spec.mode),\n            rank: 0\n        },\n        {\n            // Fetch the mode asynchronously.\n            loader: function (spec) {\n                return new Promise((resolve, reject) => {\n                    // An arrow function below seems to miscompile in our current webpack to\n                    // invalid js.\n                    require([\n                        `codemirror/mode/${spec.mode}/${spec.mode}.js`\n                    ], function () {\n                        resolve(true);\n                    });\n                });\n            },\n            rank: 99\n        }\n    ];\n    /**\n     * Get the raw list of available modes specs.\n     */\n    function getModeInfo() {\n        return CodeMirror.modeInfo;\n    }\n    Mode.getModeInfo = getModeInfo;\n    /**\n     * Running a CodeMirror mode outside of an editor.\n     */\n    function run(code, mode, el) {\n        CodeMirror.runMode(code, mode, el);\n    }\n    Mode.run = run;\n    /**\n     * Ensure a codemirror mode is available by name or Codemirror spec.\n     *\n     * @param mode - The mode to ensure.  If it is a string, uses [findBest]\n     *   to get the appropriate spec.\n     *\n     * @returns A promise that resolves when the mode is available.\n     */\n    async function ensure(mode) {\n        const spec = findBest(mode);\n        for (const specLoader of specLoaders) {\n            if (await specLoader.loader(spec)) {\n                return spec;\n            }\n        }\n        return null;\n    }\n    Mode.ensure = ensure;\n    function addSpecLoader(loader, rank) {\n        const item = { loader, rank };\n        const index = ArrayExt.upperBound(specLoaders, item, Private.itemCmp);\n        ArrayExt.insert(specLoaders, index, item);\n    }\n    Mode.addSpecLoader = addSpecLoader;\n    /**\n     * Find a codemirror mode by name or CodeMirror spec.\n     */\n    function findBest(mode) {\n        var _a;\n        const modename = typeof mode === 'string' ? mode : mode.mode || mode.name;\n        const mimetype = typeof mode !== 'string' ? mode.mime : modename;\n        const ext = typeof mode !== 'string' ? (_a = mode.ext) !== null && _a !== void 0 ? _a : [] : [];\n        return (CodeMirror.findModeByName(modename || '') ||\n            CodeMirror.findModeByMIME(mimetype || '') ||\n            findByExtension(ext) ||\n            CodeMirror.findModeByMIME(IEditorMimeTypeService.defaultMimeType) ||\n            CodeMirror.findModeByMIME('text/plain'));\n    }\n    Mode.findBest = findBest;\n    /**\n     * Find a codemirror mode by MIME.\n     */\n    function findByMIME(mime) {\n        return CodeMirror.findModeByMIME(mime);\n    }\n    Mode.findByMIME = findByMIME;\n    /**\n     * Find a codemirror mode by name.\n     */\n    function findByName(name) {\n        return CodeMirror.findModeByName(name);\n    }\n    Mode.findByName = findByName;\n    /**\n     * Find a codemirror mode by filename.\n     */\n    function findByFileName(name) {\n        const basename = PathExt.basename(name);\n        return CodeMirror.findModeByFileName(basename);\n    }\n    Mode.findByFileName = findByFileName;\n    /**\n     * Find a codemirror mode by extension.\n     */\n    function findByExtension(ext) {\n        if (typeof ext === 'string') {\n            return CodeMirror.findModeByExtension(ext);\n        }\n        for (let i = 0; i < ext.length; i++) {\n            const mode = CodeMirror.findModeByExtension(ext[i]);\n            if (mode) {\n                return mode;\n            }\n        }\n        return null;\n    }\n    Mode.findByExtension = findByExtension;\n})(Mode || (Mode = {}));\nvar Private;\n(function (Private) {\n    /**\n     * A less-than comparison function for the loader rank\n     */\n    function itemCmp(first, second) {\n        return first.rank - second.rank;\n    }\n    Private.itemCmp = itemCmp;\n})(Private || (Private = {}));\n//# sourceMappingURL=mode.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/meta';\nimport 'codemirror/mode/python/python';\n/**\n * Define an IPython codemirror mode.\n *\n * It is a slightly altered Python Mode with a `?` operator.\n */\nCodeMirror.defineMode('ipython', (config, modeOptions) => {\n    const pythonConf = {};\n    for (const prop in modeOptions) {\n        if (modeOptions.hasOwnProperty(prop)) {\n            pythonConf[prop] = modeOptions[prop];\n        }\n    }\n    pythonConf.name = 'python';\n    pythonConf.singleOperators = new RegExp('^[\\\\+\\\\-\\\\*/%&|@\\\\^~<>!\\\\?]');\n    pythonConf.identifiers = new RegExp('^[_A-Za-z\\u00A1-\\uFFFF][_A-Za-z0-9\\u00A1-\\uFFFF]*');\n    return CodeMirror.getMode(config, pythonConf);\n}, 'python');\nCodeMirror.defineMIME('text/x-ipython', 'ipython');\nCodeMirror.modeInfo.push({\n    ext: [],\n    mime: 'text/x-ipython',\n    mode: 'ipython',\n    name: 'ipython'\n});\n//# sourceMappingURL=codemirror-ipython.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport CodeMirror from 'codemirror';\nimport 'codemirror/addon/mode/multiplex';\nimport 'codemirror/mode/gfm/gfm';\nimport 'codemirror/mode/stex/stex';\n/**\n * Define an IPython GFM (GitHub Flavored Markdown) mode.\n *\n * Is just a slightly altered GFM Mode with support for LaTeX.\n * LaTeX support was supported by Codemirror GFM as of\n *   https://github.com/codemirror/CodeMirror/pull/567\n *  But was later removed in\n *   https://github.com/codemirror/CodeMirror/commit/d9c9f1b1ffe984aee41307f3e927f80d1f23590c\n */\nCodeMirror.defineMode('ipythongfm', (config, modeOptions) => {\n    const gfmMode = CodeMirror.getMode(config, {\n        name: 'gfm',\n        // Override list3 with an under-used token, rather than `keyword`\n        tokenTypeOverrides: { list3: 'string-2' }\n    });\n    const texMode = CodeMirror.getMode(config, {\n        name: 'stex',\n        inMathMode: true\n    });\n    return CodeMirror.multiplexingMode(gfmMode, \n    // force parsing inline code and code blocks with gfmMode to prevent\n    // parsing them as tex see:\n    // https://github.com/jupyterlab/jupyterlab/issues/6774\n    {\n        open: '<code>',\n        close: '</code>',\n        mode: gfmMode,\n        parseDelimiters: true\n    }, {\n        open: '<pre>',\n        close: '</pre>',\n        mode: gfmMode,\n        parseDelimiters: true\n    }, {\n        open: '```',\n        close: '```',\n        mode: gfmMode,\n        parseDelimiters: true\n    }, {\n        open: '`',\n        close: '`',\n        mode: gfmMode,\n        parseDelimiters: true\n    }, \n    // only if we did not match a code element or block,\n    // then try do parse using the tex mode\n    {\n        open: '$$',\n        close: '$$',\n        mode: texMode,\n        delimStyle: 'delimit'\n    }, {\n        open: '$',\n        close: '$',\n        mode: texMode,\n        delimStyle: 'delimit'\n    }, {\n        open: '\\\\(',\n        close: '\\\\)',\n        mode: texMode,\n        delimStyle: 'delimit'\n    }, {\n        open: '\\\\[',\n        close: '\\\\]',\n        mode: texMode,\n        delimStyle: 'delimit'\n    }\n    // .. more multiplexed styles can follow here\n    );\n}, 'gfm');\nCodeMirror.defineMIME('text/x-ipythongfm', 'ipythongfm');\nCodeMirror.modeInfo.push({\n    ext: [],\n    mime: 'text/x-ipythongfm',\n    mode: 'ipythongfm',\n    name: 'ipythongfm'\n});\n//# sourceMappingURL=codemirror-ipythongfm.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n// / <reference types=\"codemirror\"/>\n// / <reference types=\"codemirror/searchcursor\"/>\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { showDialog } from '@jupyterlab/apputils';\nimport { CodeEditor } from '@jupyterlab/codeeditor';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { ArrayExt } from '@lumino/algorithm';\nimport { JSONExt, UUID } from '@lumino/coreutils';\nimport { DisposableDelegate } from '@lumino/disposable';\nimport { Poll } from '@lumino/polling';\nimport { Signal } from '@lumino/signaling';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/addon/comment/comment.js';\nimport 'codemirror/addon/display/rulers.js';\nimport 'codemirror/addon/edit/closebrackets.js';\nimport 'codemirror/addon/edit/matchbrackets.js';\nimport 'codemirror/addon/fold/brace-fold.js';\nimport 'codemirror/addon/fold/comment-fold.js';\nimport 'codemirror/addon/fold/foldcode.js';\nimport 'codemirror/addon/fold/foldgutter.js';\nimport 'codemirror/addon/fold/indent-fold.js';\nimport 'codemirror/addon/fold/markdown-fold.js';\nimport 'codemirror/addon/fold/xml-fold.js';\nimport 'codemirror/addon/mode/simple';\nimport 'codemirror/addon/scroll/scrollpastend.js';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/addon/selection/active-line';\nimport 'codemirror/addon/selection/mark-selection';\nimport 'codemirror/addon/selection/selection-pointer';\nimport 'codemirror/keymap/emacs.js';\nimport 'codemirror/keymap/sublime.js';\nimport { CodemirrorBinding } from 'y-codemirror';\nimport { Mode } from './mode';\n// import 'codemirror/keymap/vim.js';  lazy loading of vim mode is available in ../codemirror-extension/index.ts\n/**\n * The class name added to CodeMirrorWidget instances.\n */\nconst EDITOR_CLASS = 'jp-CodeMirrorEditor';\n/**\n * The class name added to read only cell editor widgets.\n */\nconst READ_ONLY_CLASS = 'jp-mod-readOnly';\n/**\n * The class name for the hover box for collaborator cursors.\n */\nconst COLLABORATOR_CURSOR_CLASS = 'jp-CollaboratorCursor';\n/**\n * The class name for the hover box for collaborator cursors.\n */\nconst COLLABORATOR_HOVER_CLASS = 'jp-CollaboratorCursor-hover';\n/**\n * The key code for the up arrow key.\n */\nconst UP_ARROW = 38;\n/**\n * The key code for the down arrow key.\n */\nconst DOWN_ARROW = 40;\n/**\n * The time that a collaborator name hover persists.\n */\nconst HOVER_TIMEOUT = 1000;\n// @todo Remove the duality of having a modeldb and a y-codemirror\n// binding as it just introduces a lot of additional complexity without gaining anything.\nconst USE_YCODEMIRROR_BINDING = true;\n/**\n * CodeMirror editor.\n */\nexport class CodeMirrorEditor {\n    /**\n     * Construct a CodeMirror editor.\n     */\n    constructor(options) {\n        /**\n         * A signal emitted when either the top or bottom edge is requested.\n         */\n        this.edgeRequested = new Signal(this);\n        this.selectionMarkers = {};\n        this._keydownHandlers = new Array();\n        this._changeGuard = false;\n        this._uuid = '';\n        this._needsRefresh = false;\n        this._isDisposed = false;\n        this._lastChange = null;\n        const host = (this.host = options.host);\n        this.translator = options.translator || nullTranslator;\n        this._trans = this.translator.load('jupyterlab');\n        host.classList.add(EDITOR_CLASS);\n        host.classList.add('jp-Editor');\n        host.addEventListener('focus', this, true);\n        host.addEventListener('blur', this, true);\n        host.addEventListener('scroll', this, true);\n        this._uuid = options.uuid || UUID.uuid4();\n        // Handle selection style.\n        const style = options.selectionStyle || {};\n        this._selectionStyle = Object.assign(Object.assign({}, CodeEditor.defaultSelectionStyle), style);\n        const model = (this._model = options.model);\n        const config = options.config || {};\n        const fullConfig = (this._config = Object.assign(Object.assign({}, CodeMirrorEditor.defaultConfig), config));\n        const editor = (this._editor = Private.createEditor(host, fullConfig));\n        this._initializeEditorBinding();\n        // every time the model is switched, we need to re-initialize the editor binding\n        this.model.sharedModelSwitched.connect(this._initializeEditorBinding, this);\n        const doc = editor.getDoc();\n        // Handle initial values for text, mimetype, and selections.\n        if (!USE_YCODEMIRROR_BINDING) {\n            doc.setValue(model.value.text);\n        }\n        this._onMimeTypeChanged();\n        this._onCursorActivity();\n        this._poll = new Poll({\n            factory: async () => {\n                this._checkSync();\n            },\n            frequency: { interval: 3000, backoff: false },\n            standby: () => {\n                // If changed, only stand by when hidden, otherwise always stand by.\n                return this._lastChange ? 'when-hidden' : true;\n            }\n        });\n        // Connect to changes.\n        if (!USE_YCODEMIRROR_BINDING) {\n            model.value.changed.connect(this._onValueChanged, this);\n        }\n        model.mimeTypeChanged.connect(this._onMimeTypeChanged, this);\n        model.selections.changed.connect(this._onSelectionsChanged, this);\n        CodeMirror.on(editor, 'keydown', (editor, event) => {\n            const index = ArrayExt.findFirstIndex(this._keydownHandlers, handler => {\n                if (handler(this, event) === true) {\n                    event.preventDefault();\n                    return true;\n                }\n                return false;\n            });\n            if (index === -1) {\n                this.onKeydown(event);\n            }\n        });\n        CodeMirror.on(editor, 'cursorActivity', () => this._onCursorActivity());\n        if (!USE_YCODEMIRROR_BINDING) {\n            CodeMirror.on(editor.getDoc(), 'beforeChange', (instance, change) => {\n                this._beforeDocChanged(instance, change);\n            });\n        }\n        CodeMirror.on(editor.getDoc(), 'change', (instance, change) => {\n            // Manually refresh after setValue to make sure editor is properly sized.\n            if (change.origin === 'setValue' && this.hasFocus()) {\n                this.refresh();\n            }\n            this._lastChange = change;\n        });\n        // Turn off paste handling in codemirror since sometimes we want to\n        // replace it with our own.\n        editor.on('paste', (instance, event) => {\n            var _a;\n            const handlePaste = (_a = this._config['handlePaste']) !== null && _a !== void 0 ? _a : true;\n            if (!handlePaste) {\n                event.codemirrorIgnore = true;\n            }\n        });\n        // Manually refresh on paste to make sure editor is properly sized.\n        editor.getWrapperElement().addEventListener('paste', () => {\n            if (this.hasFocus()) {\n                this.refresh();\n            }\n        });\n    }\n    /**\n     * Initialize the editor binding.\n     */\n    _initializeEditorBinding() {\n        var _a;\n        if (!USE_YCODEMIRROR_BINDING) {\n            return;\n        }\n        (_a = this._yeditorBinding) === null || _a === void 0 ? void 0 : _a.destroy();\n        const sharedModel = this.model.sharedModel;\n        const opts = sharedModel.undoManager\n            ? { yUndoManager: sharedModel.undoManager }\n            : {};\n        const awareness = sharedModel.awareness;\n        this._yeditorBinding = new CodemirrorBinding(sharedModel.ysource, this.editor, awareness, opts);\n    }\n    /**\n     * The uuid of this editor;\n     */\n    get uuid() {\n        return this._uuid;\n    }\n    set uuid(value) {\n        this._uuid = value;\n    }\n    /**\n     * The selection style of this editor.\n     */\n    get selectionStyle() {\n        return this._selectionStyle;\n    }\n    set selectionStyle(value) {\n        this._selectionStyle = value;\n    }\n    /**\n     * Get the codemirror editor wrapped by the editor.\n     */\n    get editor() {\n        return this._editor;\n    }\n    /**\n     * Get the codemirror doc wrapped by the widget.\n     */\n    get doc() {\n        return this._editor.getDoc();\n    }\n    /**\n     * Get the number of lines in the editor.\n     */\n    get lineCount() {\n        return this.doc.lineCount();\n    }\n    /**\n     * Returns a model for this editor.\n     */\n    get model() {\n        return this._model;\n    }\n    /**\n     * The height of a line in the editor in pixels.\n     */\n    get lineHeight() {\n        return this._editor.defaultTextHeight();\n    }\n    /**\n     * The widget of a character in the editor in pixels.\n     */\n    get charWidth() {\n        return this._editor.defaultCharWidth();\n    }\n    /**\n     * Tests whether the editor is disposed.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of the resources held by the widget.\n     */\n    dispose() {\n        if (this.isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        this.host.removeEventListener('focus', this, true);\n        this.host.removeEventListener('blur', this, true);\n        this.host.removeEventListener('scroll', this, true);\n        if (this._yeditorBinding) {\n            this._yeditorBinding.destroy();\n        }\n        this._keydownHandlers.length = 0;\n        this._poll.dispose();\n        Signal.clearData(this);\n    }\n    /**\n     * Get a config option for the editor.\n     */\n    getOption(option) {\n        return this._config[option];\n    }\n    /**\n     * Set a config option for the editor.\n     */\n    setOption(option, value) {\n        // Don't bother setting the option if it is already the same.\n        if (this._config[option] !== value) {\n            this._config[option] = value;\n            Private.setOption(this.editor, option, value, this._config);\n        }\n    }\n    /**\n     * Set config options for the editor.\n     *\n     * This method is preferred when setting several options. The\n     * options are set within an operation, which only performs\n     * the costly update at the end, and not after every option\n     * is set.\n     */\n    setOptions(options) {\n        const editor = this._editor;\n        editor.startOperation();\n        for (let key in options) {\n            editor.operation(() => {\n                this.setOption(key, options[key]);\n            });\n        }\n        editor.endOperation();\n    }\n    /**\n     * Returns the content for the given line number.\n     */\n    getLine(line) {\n        return this.doc.getLine(line);\n    }\n    /**\n     * Find an offset for the given position.\n     */\n    getOffsetAt(position) {\n        return this.doc.indexFromPos({\n            ch: position.column,\n            line: position.line\n        });\n    }\n    /**\n     * Find a position for the given offset.\n     */\n    getPositionAt(offset) {\n        const { ch, line } = this.doc.posFromIndex(offset);\n        return { line, column: ch };\n    }\n    /**\n     * Undo one edit (if any undo events are stored).\n     */\n    undo() {\n        this.model.sharedModel.undo();\n    }\n    /**\n     * Redo one undone edit.\n     */\n    redo() {\n        this.model.sharedModel.redo();\n    }\n    /**\n     * Clear the undo history.\n     */\n    clearHistory() {\n        var _a, _b;\n        (_b = (_a = this._yeditorBinding) === null || _a === void 0 ? void 0 : _a.yUndoManager) === null || _b === void 0 ? void 0 : _b.clear();\n    }\n    /**\n     * Brings browser focus to this editor text.\n     */\n    focus() {\n        this._editor.focus();\n    }\n    /**\n     * Test whether the editor has keyboard focus.\n     */\n    hasFocus() {\n        return this._editor.getWrapperElement().contains(document.activeElement);\n    }\n    /**\n     * Explicitly blur the editor.\n     */\n    blur() {\n        this._editor.getInputField().blur();\n    }\n    /**\n     * Repaint editor.\n     */\n    refresh() {\n        this._editor.refresh();\n        this._needsRefresh = false;\n    }\n    /**\n     * Refresh the editor if it is focused;\n     * otherwise postpone refreshing till focusing.\n     */\n    resizeToFit() {\n        if (this.hasFocus()) {\n            this.refresh();\n        }\n        else {\n            this._needsRefresh = true;\n        }\n        this._clearHover();\n    }\n    // todo: docs, maybe define overlay options as a type?\n    addOverlay(mode, options) {\n        this._editor.addOverlay(mode, options);\n    }\n    removeOverlay(mode) {\n        this._editor.removeOverlay(mode);\n    }\n    getSearchCursor(query, start, caseFold) {\n        return this._editor.getDoc().getSearchCursor(query, start, caseFold);\n    }\n    getCursor(start) {\n        return this._editor.getDoc().getCursor(start);\n    }\n    get state() {\n        return this._editor.state;\n    }\n    operation(fn) {\n        return this._editor.operation(fn);\n    }\n    firstLine() {\n        return this._editor.getDoc().firstLine();\n    }\n    lastLine() {\n        return this._editor.getDoc().lastLine();\n    }\n    scrollIntoView(pos, margin) {\n        this._editor.scrollIntoView(pos, margin);\n    }\n    scrollIntoViewCentered(pos) {\n        var _a, _b;\n        const top = this._editor.charCoords(pos, 'local').top;\n        const height = this._editor.getWrapperElement().offsetHeight;\n        (_b = (_a = this.host).scrollIntoView) === null || _b === void 0 ? void 0 : _b.call(_a, {\n            behavior: 'auto',\n            block: 'center',\n            inline: 'center'\n        });\n        this._editor.scrollTo(null, top - height / 2);\n    }\n    cursorCoords(where, mode) {\n        return this._editor.cursorCoords(where, mode);\n    }\n    getRange(from, to, separator) {\n        return this._editor.getDoc().getRange(from, to, separator);\n    }\n    /**\n     * Add a keydown handler to the editor.\n     *\n     * @param handler - A keydown handler.\n     *\n     * @returns A disposable that can be used to remove the handler.\n     */\n    addKeydownHandler(handler) {\n        this._keydownHandlers.push(handler);\n        return new DisposableDelegate(() => {\n            ArrayExt.removeAllWhere(this._keydownHandlers, val => val === handler);\n        });\n    }\n    /**\n     * Set the size of the editor in pixels.\n     */\n    setSize(dimension) {\n        if (dimension) {\n            this._editor.setSize(dimension.width, dimension.height);\n        }\n        else {\n            this._editor.setSize(null, null);\n        }\n        this._needsRefresh = false;\n    }\n    /**\n     * Reveal the given position in the editor.\n     */\n    revealPosition(position) {\n        const cmPosition = this._toCodeMirrorPosition(position);\n        this._editor.scrollIntoView(cmPosition);\n    }\n    /**\n     * Reveal the given selection in the editor.\n     */\n    revealSelection(selection) {\n        const range = {\n            from: this._toCodeMirrorPosition(selection.start),\n            to: this._toCodeMirrorPosition(selection.end)\n        };\n        this._editor.scrollIntoView(range);\n    }\n    /**\n     * Get the window coordinates given a cursor position.\n     */\n    getCoordinateForPosition(position) {\n        const pos = this._toCodeMirrorPosition(position);\n        const rect = this.editor.charCoords(pos, 'page');\n        return rect;\n    }\n    /**\n     * Get the cursor position given window coordinates.\n     *\n     * @param coordinate - The desired coordinate.\n     *\n     * @returns The position of the coordinates, or null if not\n     *   contained in the editor.\n     */\n    getPositionForCoordinate(coordinate) {\n        return this._toPosition(this.editor.coordsChar(coordinate)) || null;\n    }\n    /**\n     * Returns the primary position of the cursor, never `null`.\n     */\n    getCursorPosition() {\n        const cursor = this.doc.getCursor();\n        return this._toPosition(cursor);\n    }\n    /**\n     * Set the primary position of the cursor.\n     *\n     * #### Notes\n     * This will remove any secondary cursors.\n     */\n    setCursorPosition(position, options) {\n        const cursor = this._toCodeMirrorPosition(position);\n        this.doc.setCursor(cursor, undefined, options);\n        // If the editor does not have focus, this cursor change\n        // will get screened out in _onCursorsChanged(). Make an\n        // exception for this method.\n        if (!this.editor.hasFocus()) {\n            this.model.selections.set(this.uuid, this.getSelections());\n        }\n    }\n    /**\n     * Returns the primary selection, never `null`.\n     */\n    getSelection() {\n        return this.getSelections()[0];\n    }\n    /**\n     * Set the primary selection. This will remove any secondary cursors.\n     */\n    setSelection(selection) {\n        this.setSelections([selection]);\n    }\n    /**\n     * Gets the selections for all the cursors, never `null` or empty.\n     */\n    getSelections() {\n        const selections = this.doc.listSelections();\n        if (selections.length > 0) {\n            return selections.map(selection => this._toSelection(selection));\n        }\n        const cursor = this.doc.getCursor();\n        const selection = this._toSelection({ anchor: cursor, head: cursor });\n        return [selection];\n    }\n    /**\n     * Sets the selections for all the cursors, should not be empty.\n     * Cursors will be removed or added, as necessary.\n     * Passing an empty array resets a cursor position to the start of a document.\n     */\n    setSelections(selections) {\n        const cmSelections = this._toCodeMirrorSelections(selections);\n        this.doc.setSelections(cmSelections, 0);\n    }\n    /**\n     * Replaces the current selection with the given text.\n     *\n     * @param text The text to be inserted.\n     */\n    replaceSelection(text) {\n        this.doc.replaceSelection(text);\n    }\n    /**\n     * Get a list of tokens for the current editor text content.\n     */\n    getTokens() {\n        let tokens = [];\n        for (let i = 0; i < this.lineCount; ++i) {\n            const lineTokens = this.editor.getLineTokens(i).map(t => ({\n                offset: this.getOffsetAt({ column: t.start, line: i }),\n                value: t.string,\n                type: t.type || ''\n            }));\n            tokens = tokens.concat(lineTokens);\n        }\n        return tokens;\n    }\n    /**\n     * Get the token at a given editor position.\n     */\n    getTokenForPosition(position) {\n        var _a;\n        const cursor = this._toCodeMirrorPosition(position);\n        const token = this.editor.getTokenAt(cursor);\n        return {\n            offset: this.getOffsetAt({ column: token.start, line: cursor.line }),\n            value: token.string,\n            type: (_a = token.type) !== null && _a !== void 0 ? _a : undefined\n        };\n    }\n    /**\n     * Insert a new indented line at the current cursor position.\n     */\n    newIndentedLine() {\n        this.execCommand('newlineAndIndent');\n    }\n    /**\n     * Execute a codemirror command on the editor.\n     *\n     * @param command - The name of the command to execute.\n     */\n    execCommand(command) {\n        this._editor.execCommand(command);\n    }\n    /**\n     * Handle keydown events from the editor.\n     */\n    onKeydown(event) {\n        const position = this.getCursorPosition();\n        const { line, column } = position;\n        if (line === 0 && column === 0 && event.keyCode === UP_ARROW) {\n            if (!event.shiftKey) {\n                this.edgeRequested.emit('top');\n            }\n            return false;\n        }\n        if (line === 0 && event.keyCode === UP_ARROW) {\n            if (!event.shiftKey) {\n                this.edgeRequested.emit('topLine');\n            }\n            return false;\n        }\n        const lastLine = this.lineCount - 1;\n        const lastCh = this.getLine(lastLine).length;\n        if (line === lastLine &&\n            column === lastCh &&\n            event.keyCode === DOWN_ARROW) {\n            if (!event.shiftKey) {\n                this.edgeRequested.emit('bottom');\n            }\n            return false;\n        }\n        return false;\n    }\n    /**\n     * Converts selections to code mirror selections.\n     */\n    _toCodeMirrorSelections(selections) {\n        if (selections.length > 0) {\n            return selections.map(selection => this._toCodeMirrorSelection(selection));\n        }\n        const position = { line: 0, ch: 0 };\n        return [{ anchor: position, head: position }];\n    }\n    /**\n     * Handles a mime type change.\n     */\n    _onMimeTypeChanged() {\n        const mime = this._model.mimeType;\n        const editor = this._editor;\n        const extraKeys = (editor.getOption('extraKeys') ||\n            {});\n        const isCode = mime !== 'text/plain' && mime !== 'text/x-ipythongfm';\n        if (isCode) {\n            extraKeys['Backspace'] = 'delSpaceToPrevTabStop';\n        }\n        else {\n            delete extraKeys['Backspace'];\n        }\n        this.setOption('extraKeys', extraKeys);\n        // TODO: should we provide a hook for when the mode is done being set?\n        void Mode.ensure(mime).then(spec => {\n            var _a;\n            this.setOption('mode', (_a = spec === null || spec === void 0 ? void 0 : spec.mime) !== null && _a !== void 0 ? _a : 'null');\n        });\n    }\n    /**\n     * Handles a selections change.\n     */\n    _onSelectionsChanged(selections, args) {\n        const uuid = args.key;\n        if (uuid !== this.uuid) {\n            this._cleanSelections(uuid);\n            if (args.type !== 'remove' && args.newValue) {\n                this._markSelections(uuid, args.newValue);\n            }\n        }\n    }\n    /**\n     * Clean selections for the given uuid.\n     */\n    _cleanSelections(uuid) {\n        const markers = this.selectionMarkers[uuid];\n        if (markers) {\n            markers.forEach(marker => {\n                marker.clear();\n            });\n        }\n        delete this.selectionMarkers[uuid];\n    }\n    /**\n     * Marks selections.\n     */\n    _markSelections(uuid, selections) {\n        const markers = [];\n        // If we are marking selections corresponding to an active hover,\n        // remove it.\n        if (uuid === this._hoverId) {\n            this._clearHover();\n        }\n        // If we can id the selection to a specific collaborator,\n        // use that information.\n        let collaborator;\n        if (this._model.modelDB.collaborators) {\n            collaborator = this._model.modelDB.collaborators.get(uuid);\n        }\n        // Style each selection for the uuid.\n        selections.forEach(selection => {\n            // Only render selections if the start is not equal to the end.\n            // In that case, we don't need to render the cursor.\n            if (!JSONExt.deepEqual(selection.start, selection.end)) {\n                // Selections only appear to render correctly if the anchor\n                // is before the head in the document. That is, reverse selections\n                // do not appear as intended.\n                const forward = selection.start.line < selection.end.line ||\n                    (selection.start.line === selection.end.line &&\n                        selection.start.column <= selection.end.column);\n                const anchor = this._toCodeMirrorPosition(forward ? selection.start : selection.end);\n                const head = this._toCodeMirrorPosition(forward ? selection.end : selection.start);\n                let markerOptions;\n                if (collaborator) {\n                    markerOptions = this._toTextMarkerOptions(Object.assign(Object.assign({}, selection.style), { color: collaborator.color }));\n                }\n                else {\n                    markerOptions = this._toTextMarkerOptions(selection.style);\n                }\n                markers.push(this.doc.markText(anchor, head, markerOptions));\n            }\n            else if (collaborator) {\n                const caret = this._getCaret(collaborator);\n                markers.push(this.doc.setBookmark(this._toCodeMirrorPosition(selection.end), {\n                    widget: caret\n                }));\n            }\n        });\n        this.selectionMarkers[uuid] = markers;\n    }\n    /**\n     * Handles a cursor activity event.\n     */\n    _onCursorActivity() {\n        // Only add selections if the editor has focus. This avoids unwanted\n        // triggering of cursor activity due to collaborator actions.\n        if (this._editor.hasFocus()) {\n            const selections = this.getSelections();\n            this.model.selections.set(this.uuid, selections);\n        }\n    }\n    /**\n     * Converts a code mirror selection to an editor selection.\n     */\n    _toSelection(selection) {\n        return {\n            uuid: this.uuid,\n            start: this._toPosition(selection.anchor),\n            end: this._toPosition(selection.head),\n            style: this.selectionStyle\n        };\n    }\n    /**\n     * Converts the selection style to a text marker options.\n     */\n    _toTextMarkerOptions(style) {\n        const r = parseInt(style.color.slice(1, 3), 16);\n        const g = parseInt(style.color.slice(3, 5), 16);\n        const b = parseInt(style.color.slice(5, 7), 16);\n        const css = `background-color: rgba( ${r}, ${g}, ${b}, 0.15)`;\n        return {\n            className: style.className,\n            title: style.displayName,\n            css\n        };\n    }\n    /**\n     * Converts an editor selection to a code mirror selection.\n     */\n    _toCodeMirrorSelection(selection) {\n        return {\n            anchor: this._toCodeMirrorPosition(selection.start),\n            head: this._toCodeMirrorPosition(selection.end)\n        };\n    }\n    /**\n     * Convert a code mirror position to an editor position.\n     */\n    _toPosition(position) {\n        return {\n            line: position.line,\n            column: position.ch\n        };\n    }\n    /**\n     * Convert an editor position to a code mirror position.\n     */\n    _toCodeMirrorPosition(position) {\n        return {\n            line: position.line,\n            ch: position.column\n        };\n    }\n    /**\n     * Handle model value changes.\n     */\n    _onValueChanged(value, args) {\n        if (this._changeGuard) {\n            return;\n        }\n        this._changeGuard = true;\n        const doc = this.doc;\n        switch (args.type) {\n            case 'insert': {\n                const pos = doc.posFromIndex(args.start);\n                // Replace the range, including a '+input' origin,\n                // which indicates that CodeMirror may merge changes\n                // for undo/redo purposes.\n                doc.replaceRange(args.value, pos, pos, '+input');\n                break;\n            }\n            case 'remove': {\n                const from = doc.posFromIndex(args.start);\n                const to = doc.posFromIndex(args.end);\n                // Replace the range, including a '+input' origin,\n                // which indicates that CodeMirror may merge changes\n                // for undo/redo purposes.\n                doc.replaceRange('', from, to, '+input');\n                break;\n            }\n            case 'set':\n                doc.setValue(args.value);\n                break;\n            default:\n                break;\n        }\n        this._changeGuard = false;\n    }\n    /**\n     * Handles document changes.\n     */\n    _beforeDocChanged(doc, change) {\n        if (this._changeGuard) {\n            return;\n        }\n        this._changeGuard = true;\n        const value = this._model.value;\n        const start = doc.indexFromPos(change.from);\n        const end = doc.indexFromPos(change.to);\n        const inserted = change.text.join('\\n');\n        if (end !== start) {\n            value.remove(start, end);\n        }\n        if (inserted) {\n            value.insert(start, inserted);\n        }\n        this._changeGuard = false;\n    }\n    /**\n     * Handle the DOM events for the editor.\n     *\n     * @param event - The DOM event sent to the editor.\n     *\n     * #### Notes\n     * This method implements the DOM `EventListener` interface and is\n     * called in response to events on the editor's DOM node. It should\n     * not be called directly by user code.\n     */\n    handleEvent(event) {\n        switch (event.type) {\n            case 'focus':\n                this._evtFocus(event);\n                break;\n            case 'blur':\n                this._evtBlur(event);\n                break;\n            case 'scroll':\n                this._evtScroll();\n                break;\n            default:\n                break;\n        }\n    }\n    /**\n     * Handle `focus` events for the editor.\n     */\n    _evtFocus(event) {\n        if (this._needsRefresh) {\n            this.refresh();\n        }\n        this.host.classList.add('jp-mod-focused');\n        // Update the selections on editor gaining focus because\n        // the onCursorActivity function filters usual cursor events\n        // based on the editor's focus.\n        this._onCursorActivity();\n    }\n    /**\n     * Handle `blur` events for the editor.\n     */\n    _evtBlur(event) {\n        this.host.classList.remove('jp-mod-focused');\n    }\n    /**\n     * Handle `scroll` events for the editor.\n     */\n    _evtScroll() {\n        // Remove any active hover.\n        this._clearHover();\n    }\n    /**\n     * Clear the hover for a caret, due to things like\n     * scrolling, resizing, deactivation, etc, where\n     * the position is no longer valid.\n     */\n    _clearHover() {\n        if (this._caretHover) {\n            window.clearTimeout(this._hoverTimeout);\n            document.body.removeChild(this._caretHover);\n            this._caretHover = null;\n        }\n    }\n    /**\n     * Construct a caret element representing the position\n     * of a collaborator's cursor.\n     */\n    _getCaret(collaborator) {\n        // FIXME-TRANS: Is this localizable?\n        const name = collaborator ? collaborator.displayName : 'Anonymous';\n        const color = collaborator\n            ? collaborator.color\n            : this._selectionStyle.color;\n        const caret = document.createElement('span');\n        caret.className = COLLABORATOR_CURSOR_CLASS;\n        caret.style.borderBottomColor = color;\n        caret.onmouseenter = () => {\n            this._clearHover();\n            this._hoverId = collaborator.sessionId;\n            const rect = caret.getBoundingClientRect();\n            // Construct and place the hover box.\n            const hover = document.createElement('div');\n            hover.className = COLLABORATOR_HOVER_CLASS;\n            hover.style.left = String(rect.left) + 'px';\n            hover.style.top = String(rect.bottom) + 'px';\n            hover.textContent = name;\n            hover.style.backgroundColor = color;\n            // If the user mouses over the hover, take over the timer.\n            hover.onmouseenter = () => {\n                window.clearTimeout(this._hoverTimeout);\n            };\n            hover.onmouseleave = () => {\n                this._hoverTimeout = window.setTimeout(() => {\n                    this._clearHover();\n                }, HOVER_TIMEOUT);\n            };\n            this._caretHover = hover;\n            document.body.appendChild(hover);\n        };\n        caret.onmouseleave = () => {\n            this._hoverTimeout = window.setTimeout(() => {\n                this._clearHover();\n            }, HOVER_TIMEOUT);\n        };\n        return caret;\n    }\n    /**\n     * Check for an out of sync editor.\n     */\n    _checkSync() {\n        const change = this._lastChange;\n        if (!change) {\n            return;\n        }\n        this._lastChange = null;\n        const editor = this._editor;\n        const doc = editor.getDoc();\n        if (doc.getValue() === this._model.value.text) {\n            return;\n        }\n        void showDialog({\n            title: this._trans.__('Code Editor out of Sync'),\n            body: this._trans.__('Please open your browser JavaScript console for bug report instructions')\n        });\n        console.warn('Please paste the following to https://github.com/jupyterlab/jupyterlab/issues/2951');\n        console.warn(JSON.stringify({\n            model: this._model.value.text,\n            view: doc.getValue(),\n            selections: this.getSelections(),\n            cursor: this.getCursorPosition(),\n            lineSep: editor.getOption('lineSeparator'),\n            mode: editor.getOption('mode'),\n            change\n        }));\n    }\n}\n/**\n * The namespace for `CodeMirrorEditor` statics.\n */\n(function (CodeMirrorEditor) {\n    /**\n     * The default configuration options for an editor.\n     */\n    CodeMirrorEditor.defaultConfig = Object.assign(Object.assign({}, CodeEditor.defaultConfig), { mode: 'null', theme: 'jupyter', smartIndent: true, electricChars: true, keyMap: 'default', extraKeys: null, gutters: [], fixedGutter: true, showCursorWhenSelecting: false, coverGutterNextToScrollbar: false, dragDrop: true, lineSeparator: null, scrollbarStyle: 'native', lineWiseCopyCut: true, scrollPastEnd: false, styleActiveLine: false, styleSelectedText: true, selectionPointer: false, rulers: [], foldGutter: false, handlePaste: true });\n    /**\n     * Add a command to CodeMirror.\n     *\n     * @param name - The name of the command to add.\n     *\n     * @param command - The command function.\n     */\n    function addCommand(name, command) {\n        CodeMirror.commands[name] = command;\n    }\n    CodeMirrorEditor.addCommand = addCommand;\n})(CodeMirrorEditor || (CodeMirrorEditor = {}));\n/**\n * The namespace for module private data.\n */\nvar Private;\n(function (Private) {\n    function createEditor(host, config) {\n        const { autoClosingBrackets, fontFamily, fontSize, insertSpaces, lineHeight, lineWrap, wordWrapColumn, tabSize, readOnly } = config, otherOptions = __rest(config, [\"autoClosingBrackets\", \"fontFamily\", \"fontSize\", \"insertSpaces\", \"lineHeight\", \"lineWrap\", \"wordWrapColumn\", \"tabSize\", \"readOnly\"]);\n        const bareConfig = Object.assign({ autoCloseBrackets: autoClosingBrackets ? {} : false, indentUnit: tabSize, indentWithTabs: !insertSpaces, lineWrapping: lineWrap === 'off' ? false : true, readOnly }, otherOptions);\n        return CodeMirror(el => {\n            if (fontFamily) {\n                el.style.fontFamily = fontFamily;\n            }\n            if (fontSize) {\n                el.style.fontSize = fontSize + 'px';\n            }\n            if (lineHeight) {\n                el.style.lineHeight = lineHeight.toString();\n            }\n            if (readOnly) {\n                el.classList.add(READ_ONLY_CLASS);\n            }\n            if (lineWrap === 'wordWrapColumn') {\n                const lines = el.querySelector('.CodeMirror-lines');\n                lines.style.width = `${wordWrapColumn}ch`;\n            }\n            if (lineWrap === 'bounded') {\n                const lines = el.querySelector('.CodeMirror-lines');\n                lines.style.maxWidth = `${wordWrapColumn}ch`;\n            }\n            host.appendChild(el);\n        }, bareConfig);\n    }\n    Private.createEditor = createEditor;\n    /**\n     * Indent or insert a tab as appropriate.\n     */\n    function indentMoreOrinsertTab(cm) {\n        const doc = cm.getDoc();\n        const from = doc.getCursor('from');\n        const to = doc.getCursor('to');\n        const sel = !posEq(from, to);\n        if (sel) {\n            CodeMirror.commands['indentMore'](cm);\n            return;\n        }\n        // Check for start of line.\n        const line = doc.getLine(from.line);\n        const before = line.slice(0, from.ch);\n        if (/^\\s*$/.test(before)) {\n            CodeMirror.commands['indentMore'](cm);\n        }\n        else {\n            if (cm.getOption('indentWithTabs')) {\n                CodeMirror.commands['insertTab'](cm);\n            }\n            else {\n                CodeMirror.commands['insertSoftTab'](cm);\n            }\n        }\n    }\n    Private.indentMoreOrinsertTab = indentMoreOrinsertTab;\n    /**\n     * Delete spaces to the previous tab stop in a codemirror editor.\n     */\n    function delSpaceToPrevTabStop(cm) {\n        var _a;\n        const doc = cm.getDoc();\n        // default tabsize is 2, according to codemirror docs: https://codemirror.net/doc/manual.html#config\n        const tabSize = (_a = cm.getOption('indentUnit')) !== null && _a !== void 0 ? _a : 2;\n        const ranges = doc.listSelections(); // handle multicursor\n        for (let i = ranges.length - 1; i >= 0; i--) {\n            // iterate reverse so any deletions don't overlap\n            const head = ranges[i].head;\n            const anchor = ranges[i].anchor;\n            const isSelection = !posEq(head, anchor);\n            if (isSelection) {\n                doc.replaceRange('', anchor, head);\n            }\n            else {\n                const line = doc.getLine(head.line).substring(0, head.ch);\n                if (line.match(/^\\ +$/) !== null) {\n                    // delete tabs\n                    const prevTabStop = (Math.ceil(head.ch / tabSize) - 1) * tabSize;\n                    const from = CodeMirror.Pos(head.line, prevTabStop);\n                    doc.replaceRange('', from, head);\n                }\n                else {\n                    // delete non-tabs\n                    const from = cm.findPosH(head, -1, 'char', false);\n                    doc.replaceRange('', from, head);\n                }\n            }\n        }\n    }\n    Private.delSpaceToPrevTabStop = delSpaceToPrevTabStop;\n    /**\n     * Test whether two CodeMirror positions are equal.\n     */\n    function posEq(a, b) {\n        return a.line === b.line && a.ch === b.ch;\n    }\n    Private.posEq = posEq;\n    /**\n     * Get the list of active gutters\n     *\n     * @param config Editor configuration\n     */\n    function getActiveGutters(config) {\n        // The order of the classes will be the gutters order\n        const classToSwitch = {\n            'CodeMirror-linenumbers': 'lineNumbers',\n            'CodeMirror-foldgutter': 'codeFolding'\n        };\n        return Object.keys(classToSwitch).filter(gutter => config[classToSwitch[gutter]]);\n    }\n    /**\n     * Set a config option for the editor.\n     */\n    function setOption(editor, option, value, config) {\n        const el = editor.getWrapperElement();\n        switch (option) {\n            case 'cursorBlinkRate':\n                editor.setOption(option, value);\n                break;\n            case 'lineWrap': {\n                const lineWrapping = value === 'off' ? false : true;\n                const lines = el.querySelector('.CodeMirror-lines');\n                const maxWidth = value === 'bounded' ? `${config.wordWrapColumn}ch` : null;\n                const width = value === 'wordWrapColumn' ? `${config.wordWrapColumn}ch` : null;\n                lines.style.setProperty('max-width', maxWidth);\n                lines.style.setProperty('width', width);\n                editor.setOption('lineWrapping', lineWrapping);\n                break;\n            }\n            case 'wordWrapColumn': {\n                const { lineWrap } = config;\n                if (lineWrap === 'wordWrapColumn' || lineWrap === 'bounded') {\n                    const lines = el.querySelector('.CodeMirror-lines');\n                    const prop = lineWrap === 'wordWrapColumn' ? 'width' : 'maxWidth';\n                    lines.style[prop] = `${value}ch`;\n                }\n                break;\n            }\n            case 'tabSize':\n                editor.setOption('indentUnit', value);\n                break;\n            case 'insertSpaces':\n                editor.setOption('indentWithTabs', !value);\n                break;\n            case 'autoClosingBrackets':\n                editor.setOption('autoCloseBrackets', value);\n                break;\n            case 'rulers': {\n                const rulers = value;\n                editor.setOption('rulers', rulers.map(column => {\n                    return {\n                        column,\n                        className: 'jp-CodeMirror-ruler'\n                    };\n                }));\n                break;\n            }\n            case 'readOnly':\n                el.classList.toggle(READ_ONLY_CLASS, value);\n                editor.setOption(option, value);\n                break;\n            case 'fontFamily':\n                el.style.fontFamily = value;\n                break;\n            case 'fontSize':\n                el.style.setProperty('font-size', value ? value + 'px' : null);\n                break;\n            case 'lineHeight':\n                el.style.lineHeight = (value ? value.toString() : null);\n                break;\n            case 'gutters':\n                editor.setOption(option, getActiveGutters(config));\n                break;\n            case 'lineNumbers':\n                editor.setOption(option, value);\n                editor.setOption('gutters', getActiveGutters(config));\n                break;\n            case 'codeFolding':\n                editor.setOption('foldGutter', value);\n                editor.setOption('gutters', getActiveGutters(config));\n                break;\n            default:\n                editor.setOption(option, value);\n                break;\n        }\n    }\n    Private.setOption = setOption;\n})(Private || (Private = {}));\n/**\n * Add a CodeMirror command to delete until previous non blanking space\n * character or first multiple of tabsize tabstop.\n */\nCodeMirrorEditor.addCommand('delSpaceToPrevTabStop', Private.delSpaceToPrevTabStop);\n/**\n * Add a CodeMirror command to indent or insert a tab as appropriate.\n */\nCodeMirrorEditor.addCommand('indentMoreOrinsertTab', Private.indentMoreOrinsertTab);\n//# sourceMappingURL=editor.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { CodeMirrorEditor } from './editor';\n/**\n * CodeMirror editor factory.\n */\nexport class CodeMirrorEditorFactory {\n    /**\n     * Construct an IEditorFactoryService for CodeMirrorEditors.\n     */\n    constructor(defaults = {}, translator) {\n        /**\n         * Create a new editor for inline code.\n         */\n        this.newInlineEditor = (options) => {\n            options.host.dataset.type = 'inline';\n            return new CodeMirrorEditor(Object.assign(Object.assign({}, options), { config: Object.assign(Object.assign({}, this.inlineCodeMirrorConfig), (options.config || {})), translator: this.translator }));\n        };\n        /**\n         * Create a new editor for a full document.\n         */\n        this.newDocumentEditor = (options) => {\n            options.host.dataset.type = 'document';\n            return new CodeMirrorEditor(Object.assign(Object.assign({}, options), { config: Object.assign(Object.assign({}, this.documentCodeMirrorConfig), (options.config || {})), translator: this.translator }));\n        };\n        this.translator = translator || nullTranslator;\n        this.inlineCodeMirrorConfig = Object.assign(Object.assign(Object.assign({}, CodeMirrorEditor.defaultConfig), { extraKeys: {\n                'Cmd-Right': 'goLineRight',\n                End: 'goLineRight',\n                'Cmd-Left': 'goLineLeft',\n                Tab: 'indentMoreOrinsertTab',\n                'Shift-Tab': 'indentLess',\n                'Cmd-/': 'toggleComment',\n                'Ctrl-/': 'toggleComment',\n                'Ctrl-G': 'find',\n                'Cmd-G': 'find'\n            } }), defaults);\n        this.documentCodeMirrorConfig = Object.assign(Object.assign(Object.assign({}, CodeMirrorEditor.defaultConfig), { extraKeys: {\n                Tab: 'indentMoreOrinsertTab',\n                'Shift-Tab': 'indentLess',\n                'Cmd-/': 'toggleComment',\n                'Ctrl-/': 'toggleComment',\n                'Shift-Enter': () => {\n                    /* no-op */\n                }\n            }, lineNumbers: true, scrollPastEnd: true }), defaults);\n    }\n}\n//# sourceMappingURL=factory.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { PathExt } from '@jupyterlab/coreutils';\nimport { Mode } from './mode';\n/**\n * The mime type service for CodeMirror.\n */\nexport class CodeMirrorMimeTypeService {\n    /**\n     * Returns a mime type for the given language info.\n     *\n     * #### Notes\n     * If a mime type cannot be found returns the default mime type `text/plain`, never `null`.\n     */\n    getMimeTypeByLanguage(info) {\n        const ext = info.file_extension || '';\n        return Mode.findBest(info.codemirror_mode || {\n            mimetype: info.mimetype,\n            name: info.name,\n            ext: [ext.split('.').slice(-1)[0]]\n        }).mime;\n    }\n    /**\n     * Returns a mime type for the given file path.\n     *\n     * #### Notes\n     * If a mime type cannot be found returns the default mime type `text/plain`, never `null`.\n     */\n    getMimeTypeByFilePath(path) {\n        const ext = PathExt.extname(path);\n        if (ext === '.ipy') {\n            return 'text/x-python';\n        }\n        else if (ext === '.md') {\n            return 'text/x-ipythongfm';\n        }\n        const mode = Mode.findByFileName(path) || Mode.findBest('');\n        return mode.mime;\n    }\n}\n//# sourceMappingURL=mimetype.js.map","import { VDomModel, VDomRenderer } from '@jupyterlab/apputils';\nimport { interactiveItem, showPopup, TextItem } from '@jupyterlab/statusbar';\nimport { nullTranslator } from '@jupyterlab/translation';\nimport { Menu } from '@lumino/widgets';\nimport React from 'react';\nimport { Mode } from '.';\n/**\n * A pure function that returns a tsx component for an editor syntax item.\n *\n * @param props: the props for the component.\n *\n * @returns an editor syntax component.\n */\nfunction EditorSyntaxComponent(props) {\n    return React.createElement(TextItem, { source: props.mode, onClick: props.handleClick });\n}\n/**\n * StatusBar item to change the language syntax highlighting of the file editor.\n */\nexport class EditorSyntaxStatus extends VDomRenderer {\n    /**\n     * Construct a new VDomRenderer for the status item.\n     */\n    constructor(opts) {\n        super(new EditorSyntaxStatus.Model());\n        /**\n         * Create a menu for selecting the mode of the editor.\n         */\n        this._handleClick = () => {\n            const modeMenu = new Menu({ commands: this._commands });\n            const command = 'codemirror:change-mode';\n            if (this._popup) {\n                this._popup.dispose();\n            }\n            Mode.getModeInfo()\n                .sort((a, b) => {\n                const aName = a.name || '';\n                const bName = b.name || '';\n                return aName.localeCompare(bName);\n            })\n                .forEach(spec => {\n                if (spec.mode.indexOf('brainf') === 0) {\n                    return;\n                }\n                const args = {\n                    insertSpaces: true,\n                    name: spec.name\n                };\n                modeMenu.addItem({\n                    command,\n                    args\n                });\n            });\n            this._popup = showPopup({\n                body: modeMenu,\n                anchor: this,\n                align: 'left'\n            });\n        };\n        this._popup = null;\n        this._commands = opts.commands;\n        this.translator = opts.translator || nullTranslator;\n        const trans = this.translator.load('jupyterlab');\n        this.addClass(interactiveItem);\n        this.title.caption = trans.__('Change text editor syntax highlighting');\n    }\n    /**\n     * Render the status item.\n     */\n    render() {\n        if (!this.model) {\n            return null;\n        }\n        return (React.createElement(EditorSyntaxComponent, { mode: this.model.mode, handleClick: this._handleClick }));\n    }\n}\n/**\n * A namespace for EditorSyntax statics.\n */\n(function (EditorSyntaxStatus) {\n    /**\n     * A VDomModel for the current editor/mode combination.\n     */\n    class Model extends VDomModel {\n        constructor() {\n            super(...arguments);\n            /**\n             * If the editor mode changes, update the model.\n             */\n            this._onMIMETypeChange = (mode, change) => {\n                const oldMode = this._mode;\n                const spec = Mode.findByMIME(change.newValue);\n                this._mode = spec.name || spec.mode;\n                this._triggerChange(oldMode, this._mode);\n            };\n            this._mode = '';\n            this._editor = null;\n        }\n        /**\n         * The current mode for the editor. If no editor is present,\n         * returns the empty string.\n         */\n        get mode() {\n            return this._mode;\n        }\n        /**\n         * The current editor for the application editor tracker.\n         */\n        get editor() {\n            return this._editor;\n        }\n        set editor(editor) {\n            const oldEditor = this._editor;\n            if (oldEditor !== null) {\n                oldEditor.model.mimeTypeChanged.disconnect(this._onMIMETypeChange);\n            }\n            const oldMode = this._mode;\n            this._editor = editor;\n            if (this._editor === null) {\n                this._mode = '';\n            }\n            else {\n                const spec = Mode.findByMIME(this._editor.model.mimeType);\n                this._mode = spec.name || spec.mode;\n                this._editor.model.mimeTypeChanged.connect(this._onMIMETypeChange);\n            }\n            this._triggerChange(oldMode, this._mode);\n        }\n        /**\n         * Trigger a rerender of the model.\n         */\n        _triggerChange(oldState, newState) {\n            if (oldState !== newState) {\n                this.stateChanged.emit(void 0);\n            }\n        }\n    }\n    EditorSyntaxStatus.Model = Model;\n})(EditorSyntaxStatus || (EditorSyntaxStatus = {}));\n//# sourceMappingURL=syntaxstatus.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\nimport { Token } from '@lumino/coreutils';\n/* tslint:disable */\n/**\n * The CodeMirror token.\n */\nexport const ICodeMirror = new Token('@jupyterlab/codemirror:ICodeMirror');\n//# sourceMappingURL=tokens.js.map","// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n/**\n * @packageDocumentation\n * @module codemirror\n */\nimport { CodeMirrorEditorFactory } from './factory';\nimport { CodeMirrorMimeTypeService } from './mimetype';\nexport * from './editor';\nexport * from './factory';\nexport * from './mimetype';\nexport * from './mode';\nexport * from './syntaxstatus';\nexport * from './tokens';\n/**\n * The default editor services.\n */\nexport const editorServices = {\n    factoryService: new CodeMirrorEditorFactory(),\n    mimeTypeService: new CodeMirrorMimeTypeService()\n};\n/**\n * FIXME-TRANS: Maybe an option to be able to pass a translator to the factories?\n *\n\nexport function getEditorServices(translator: ITranslator): IEditorServices {\n  return {\n    factoryService: new CodeMirrorEditorFactory({}, translator),\n    mimeTypeService: new CodeMirrorMimeTypeService(translator)\n  };\n}\n */\n//# sourceMappingURL=index.js.map"],"names":["Mode","Private","config","modeOptions","pythonConf","prop","hasOwnProperty","name","singleOperators","RegExp","identifiers","ext","mime","mode","gfmMode","tokenTypeOverrides","list3","texMode","inMathMode","open","close","parseDelimiters","delimStyle","specLoaders","loader","async","spec","rank","Promise","resolve","reject","findBest","_a","modename","mimetype","findByExtension","IEditorMimeTypeService","i","length","getModeInfo","run","code","el","ensure","specLoader","addSpecLoader","item","index","ArrayExt","itemCmp","findByMIME","findByName","findByFileName","basename","PathExt","first","second","READ_ONLY_CLASS","CodeMirrorEditor","constructor","options","this","edgeRequested","Signal","selectionMarkers","_keydownHandlers","Array","_changeGuard","_uuid","_needsRefresh","_isDisposed","_lastChange","host","translator","nullTranslator","_trans","load","classList","add","addEventListener","uuid","UUID","style","selectionStyle","_selectionStyle","Object","assign","CodeEditor","model","_model","fullConfig","_config","defaultConfig","editor","_editor","createEditor","_initializeEditorBinding","sharedModelSwitched","connect","getDoc","_onMimeTypeChanged","_onCursorActivity","_poll","Poll","factory","_checkSync","frequency","interval","backoff","standby","mimeTypeChanged","selections","changed","_onSelectionsChanged","event","handler","preventDefault","onKeydown","instance","change","origin","hasFocus","refresh","on","codemirrorIgnore","getWrapperElement","_yeditorBinding","destroy","sharedModel","opts","undoManager","yUndoManager","awareness","ysource","value","doc","lineCount","defaultTextHeight","defaultCharWidth","dispose","isDisposed","removeEventListener","getOption","option","setOption","setOptions","startOperation","key","operation","endOperation","getLine","line","getOffsetAt","position","indexFromPos","ch","column","getPositionAt","offset","posFromIndex","undo","redo","clearHistory","_b","clear","focus","contains","document","activeElement","blur","getInputField","resizeToFit","_clearHover","addOverlay","removeOverlay","getSearchCursor","query","start","caseFold","getCursor","state","fn","firstLine","lastLine","scrollIntoView","pos","margin","scrollIntoViewCentered","top","charCoords","height","offsetHeight","call","behavior","block","inline","scrollTo","cursorCoords","where","getRange","from","to","separator","addKeydownHandler","push","DisposableDelegate","val","setSize","dimension","width","revealPosition","cmPosition","_toCodeMirrorPosition","revealSelection","selection","range","end","getCoordinateForPosition","getPositionForCoordinate","coordinate","_toPosition","coordsChar","getCursorPosition","cursor","setCursorPosition","setCursor","undefined","set","getSelections","getSelection","setSelection","setSelections","listSelections","map","_toSelection","anchor","head","cmSelections","_toCodeMirrorSelections","replaceSelection","text","getTokens","tokens","lineTokens","getLineTokens","t","string","type","concat","getTokenForPosition","token","getTokenAt","newIndentedLine","execCommand","command","keyCode","shiftKey","emit","lastCh","_toCodeMirrorSelection","mimeType","extraKeys","then","args","_cleanSelections","newValue","_markSelections","markers","forEach","marker","collaborator","_hoverId","modelDB","collaborators","get","JSONExt","caret","_getCaret","setBookmark","widget","forward","markerOptions","_toTextMarkerOptions","color","markText","css","parseInt","slice","className","title","displayName","_onValueChanged","replaceRange","setValue","_beforeDocChanged","inserted","join","remove","insert","handleEvent","_evtFocus","_evtBlur","_evtScroll","_caretHover","window","clearTimeout","_hoverTimeout","body","removeChild","createElement","borderBottomColor","onmouseenter","sessionId","rect","getBoundingClientRect","hover","left","String","bottom","textContent","backgroundColor","onmouseleave","setTimeout","appendChild","getValue","showDialog","__","console","warn","JSON","stringify","view","lineSep","theme","smartIndent","electricChars","keyMap","gutters","fixedGutter","showCursorWhenSelecting","coverGutterNextToScrollbar","dragDrop","lineSeparator","scrollbarStyle","lineWiseCopyCut","scrollPastEnd","styleActiveLine","styleSelectedText","selectionPointer","rulers","foldGutter","handlePaste","addCommand","posEq","a","b","getActiveGutters","classToSwitch","keys","filter","gutter","autoClosingBrackets","fontFamily","fontSize","insertSpaces","lineHeight","lineWrap","wordWrapColumn","tabSize","readOnly","otherOptions","s","e","p","prototype","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","bareConfig","autoCloseBrackets","indentUnit","indentWithTabs","lineWrapping","toString","querySelector","maxWidth","indentMoreOrinsertTab","cm","before","test","delSpaceToPrevTabStop","ranges","substring","match","prevTabStop","Math","ceil","findPosH","lines","setProperty","toggle","CodeMirrorEditorFactory","defaults","newInlineEditor","dataset","inlineCodeMirrorConfig","newDocumentEditor","documentCodeMirrorConfig","End","Tab","lineNumbers","CodeMirrorMimeTypeService","getMimeTypeByLanguage","info","file_extension","codemirror_mode","split","getMimeTypeByFilePath","path","EditorSyntaxComponent","props","TextItem","source","onClick","handleClick","EditorSyntaxStatus","VDomRenderer","super","Model","_handleClick","modeMenu","Menu","commands","_commands","_popup","sort","aName","bName","localeCompare","addItem","showPopup","align","trans","addClass","interactiveItem","caption","render","VDomModel","arguments","_onMIMETypeChange","oldMode","_mode","_triggerChange","oldEditor","disconnect","oldState","newState","stateChanged","ICodeMirror","Token","editorServices","factoryService","mimeTypeService"],"sourceRoot":""}